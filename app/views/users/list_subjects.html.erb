<% content_for(:body_class, 'profile-page') %>
<% content_for(:current, 'my_subjects') %>
<% content_for(:title, 'GrowthValley > My Account > Subjects') %>
<div class="main-content-area wrapper my-subjets-page">

  <h4>Choose My Subjects</h4>

  <div class="row-fluid">
    <!--Start First Column-->
    <%= form_tag update_user_subjects_path do %>
      <% @subjects.in_groups_of(4, false) do |subj| %>
        <div class='row-fluid'>
          <% subj.collect do |s| %>
            <div class='span3'>
              <div class="btn-group" data-toggle="buttons">
                <%= label_tag s.name, s.name, class: 'btn'  do %>
                  <%= s.name %>
                  <%= check_box_tag "user[subject_ids][]", s.id, @current_subjects.include?(s.id), class: "subject" %>
                   
                <% end %>
              </div>
            </div>
          <% end %>
        </div>
        <% end %>
    </br>
      <div class='row-fluid'>
        <div class='span3'>
          <%= submit_tag 'Add Subjects', class: 'btn btn-green', onclick: "return count_subjects();" %>
        </div>
      </div>
      <% end %>
  </div>    
</div>
<!--End Main Content Area-->
    <% if false %>
      <%= render :partial=>"layouts/inner_nav", :locals=>{:current => "subject"} %>

      <h1> Subjects </h1>
    </br>
    <%= form_tag update_user_subjects_path do %>
    <% @subjects.in_groups_of(4, false) do |subj| %>
    <div class='row-fluid'>
      <% subj.collect do |s| %>
      <div class='span3'>
        <%= check_box_tag "user[subject_ids][]", s.id, current_user.subjects.include?(s), style: "float: left; margin-right: 5px;", class: "subject" %>
        <%= label_tag s.name, s.name, style: "margin-top: -2px;" %>
      </div>
      <% end %>
    </div>
    <% end %>
  </br>
  <div class='row-fluid'>
    <div class='span3'>
      <%= submit_tag 'Add Subjects', class: 'btn btn-primary', onclick: "return count_subjects();" unless current_user.subjects.count == 3 %>
    </div>
  </div>
  <% end %>
  <% end %>
  <script>
    function count_subjects()
    {
     if ($( "input[class='subject']:checked" ).length < 3)
     {
      alert("Please select at least 3 subjects");
      return false
    }
  }
</script>
