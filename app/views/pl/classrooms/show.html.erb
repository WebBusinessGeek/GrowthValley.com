<div class="main-content">
  <div>
    <h2>Classroom: <%= @classroom.title.titleize %></h2>
    <ol style="float:left;">
      <li>
        <p>Description: <%= @classroom.description %></p>
      </li>
      <li>Teacher: <%= @classroom.teacher.full_name %></li>
      <li>Learner: <%= @classroom.learner.full_name %></li>
    </ol>
    <span style="margin-left:100px;">
      <%= image_tag(@classroom.course.course_cover_pic.url(:cover)) %>
    </span>
    <h4>Progress: <%= @classroom.progress %>%</h4>
    <div class="well">
      <% if user_signed_in? %>
        <% if current_user == @classroom.teacher %>
          <% if @classroom.active? && @classroom.payment_inactive? %>
            <%= link_to "Request Classroom Payment", classroom_request_payment_path(@classroom), method: :post, class: 'btn btn-primary' %>
          <% elsif @classroom.active? && @classroom.payment_requested? %>
            <%= link_to "Payment requested", "javascript:void(0);", class: "btn btn-primary disabled" %>
          <% elsif @classroom.active? && @classroom.payment_approved? %>
            <%= link_to "Payment approved and awaiting transfer", "javascript:void(0);", class: 'btn btn-primary disabled' %>
          <% end %>
          <% if @classroom.privacy? %>
            <%= link_to "Make Classroom Public", toggle_privacy_classroom_path(@classroom), method: :post, class: 'btn btn-primary' %>
          <% else %>
            <%= link_to "Make Classroom Private", toggle_privacy_classroom_path(@classroom), method: :post, class: 'btn btn-primary' %>
          <% end %>
        <% elsif current_user == @classroom.learner %>
          <% if @classroom.active? && @classroom.payment_requested? %>
            <%= link_to "Approve Classroom Payment", classroom_approve_payment_path(@classroom), method: :post, class: "btn btn-primary" %>
          <% end %>
        <% end %>
      <% end %>
    </div>
  </div>

  <div style="clear:both;width:100%">
    <hr>
    <h2>Lessons</h2>
    <% if @classroom.users.include?(current_user) && user_signed_in? %>
      <ul id="lessons" data-update-url="<%= sort_lessons_url %>" data-classroom-id="<%= @classroom.id %>" style="padding:3px;min-height:300px;margin:3px 3px 3px 3px 0">
        <%= render partial: "pl/lessons/detailed_lesson", collection: @classroom.lessons, as: :lesson %>
      </ul>
    <% else %>
      <ul>
        <%= render partial: 'pl/lessons/static_lesson', collection: @classroom.lessons, as: :lesson %>
      </ul>
    <% end %>
    <div style="clear:both;">
      <%= link_to "Add a lesson", new_classroom_lesson_path(@classroom), class: "btn btn-primary" if @classroom.teacher == current_user %>
    </div>
  </div>

  <hr>
  <span><%= link_to "My Classrooms", classrooms_path, class: 'btn btn-primary' %></span>
  <span><%= link_to "Back to Course page", course_path(@classroom.course), class: 'btn btn-primary' %></span>
  <div id="lesson_modal" class="modal hide fade">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
      <h3>Modal header</h3>
    </div>
    <div class="modal-body"></div>
  </div>
</div>

